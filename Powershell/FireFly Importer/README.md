# FireFly Auto Importer
Uses Invoke-WebRequest to send a POST request to the FireFly Auto importer so you can schedule the automatic imports of your transactions.
This is assuming you either configured your importer to use Nordigen or Spectre. I use Nordigen myself, but the steps should be the same for Spectre.

## Create a configuration file for use
It's easier to have a JSON file generated by the importer for the first time so you can don't have to do a whole bunch of manual work.
Simply go to http://<importerIP:port> and import with your provider. At the end download the configuration file. 

## Create the Docker Container
You will also need to configure your importer with a secret and allow POST requests to it. I've made a simple .env and docker-compose.yml file for this you can download and use. 
You need to add a few values in the .env file to make it work
- **FIREFLY_III_URL:** Enter the URL of your Firefly instance with portnumber if needed
- **FIREFLY_III_ACCESS_TOKEN:** You can generate this in FireFly under Options > Profile > OAuth tab and create a new token under Personal Access Tokens. Copy the token here
- **NORDIGEN_ID and NORDIGEN_KEY / SPECTRE_APP_ID and SPECTRE_SECRET:** These are gotten from their respective providers you can copy the values here
- **AUTO_IMPORT_SECRET:** Make up your own secret, could be a password or something randomly generated, you need this so the POST request can authenticate
- **CAN_POST_AUTOIMPORT:** This needs to be set to True, otherwise you will get an error during POST that autoimport through POST is disabled
- **CAN_POST_FILES:** Needs to be set to True as well, for the same reason as above

To make the container, create a new folder in your docker server, copy the .env and docker-compose.yml files into it and navigate into it. Then run sudo docker-compose up -d to create it. 

## Configure the Script
There are only a few changes you need to make. The locations for the JSON file and the temporary file with the output from the POST request. 

If you want e-mail you can configure the $mailmessage values as well. If not you can completely remove the Send E-mail report block. 

I'm fully aware Send-Mailmessage is deprecated, but I personally use this internally only with no access to the internet so I'm pretty much ok with using it. 